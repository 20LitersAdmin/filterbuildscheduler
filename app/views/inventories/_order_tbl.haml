-# frozen_string_literal: true
- tech_names_and_quantities = order_tbl.quantities_with_tech_names_short

%tr{ id: order_tbl.uid }
  %td.small-text
    - if current_user.is_admin?
      = link_to order_tbl.uid_and_name, rails_admin.edit_path(model_name: order_tbl.model_name.name, id: order_tbl.id), target: '_blank'
    - else
      = order_tbl.uid_and_name
  - if @locator == 'item'
    %td.item-supplier.small-text
      - if (supplier = order_tbl.supplier)
        = link_to supplier.name, rails_admin.edit_path(model_name: supplier.model_name.name, id: supplier.id)
  %td.center-align
    = human_float(order_tbl.weeks_to_deliver)
  %td.center-align
    = human_number(order_tbl.available_count)
  %td.center-align
    = human_number(order_tbl.goal_remainder)
  %td.item-cost.right-align
    $
    %span.item-cost-value= order_tbl.price
  %td.min-order
    = text_field_tag "#{@locator}_min_order_#{order_tbl.id}", human_number(order_tbl.min_order), class: 'min-order-field right-align', min: 0
  %td.order-total.right-align
    $
    %span.order-total-amt= number_with_delimiter(order_tbl.reorder_total_cost, delimiter: ',')
  %td.order-check.center-align.small-text
    = check_box_tag "checkbox_#{@locator}_#{order_tbl.id}", 1, false, class: 'order_checkbox'
    - if order_tbl.on_order?
      %br
      %i
        Ordered #{human_number(order_tbl.last_ordered_quantity)}
        %br on #{human_date(order_tbl.last_ordered_at)}
