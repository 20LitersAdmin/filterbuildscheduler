-# frozen_string_literal: true

.container
  .row
    = form_tag items_technology_path(@technology.id), method: 'get', class: 'form-inline', enforce_uft8: false do
      .col-md-5
        %h3 #{@technology.name} Item List:
      .col-md-2.no-print.form-group
        = number_field_tag 'q', @quantity_val, { min: 0, step: 1, class: 'form-control', placeholder: 'Quantity' }
      .col-md-3.no-print.form-group
        %label{ for: 'i' } Ignore Component Avail.
        = check_box_tag 'i', '1', @ignore_component_counts
      .col-md-2.no-print.form-group
        = submit_tag 'Set Quantity', class: 'btn yellow', name: nil
  .row
    .col
      %table.table{ id: "list_item_tbl_#{@technology.id}" }
        %tbody
          %tr
            %th{ colspan: 5 } Components:
            %th Supplier
            %th # per:
            %th avail.
            %th need
          -# Components
          = render partial: 'assembly', collection: @assemblies.where(item_type: 'Component').prioritized, locals: { nesting: 0 }
          %tr
            %th{ colspan: 5 } Parts:
            %th Supplier
            %th # per:
            %th avail.
            %th need
          -# Parts
          = render partial: 'assembly', collection: @assemblies.where(item_type: 'Part').prioritized, locals: { nesting: 0 }
          -# Materials
          - if @materials.any?
            %tr
              %th{ colspan: 5 } Materials:
              %th Supplier
              %th # per:
              %th avail.
              %th need
          = render partial: 'material', collection:  @materials
  .row.no-print
    .col.right-align
      = link_to 'Back', technologies_path, class: 'btn blue'
