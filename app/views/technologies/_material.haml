-# frozen_string_literal: true
:ruby
  available = material.available_count
  goal_remainder = material.goal_remainder
  highlight = 'color: red; font-weight: bolder; border: solid 2px red' if goal_remainder > available

%tr
  - if nesting.positive?
    %td{ colspan: nesting }
  %td.right-align
    = material.uid
  %td{ colspan: 6 - nesting }
    = material.name
  %td
    = material.supplier&.name
  %td.right-align
    = human_number available
  %td.right-align
    = human_float 1 / part.quantity_from_material.to_f
  %td.right-align{ style: highlight }
    = human_number goal_remainder
